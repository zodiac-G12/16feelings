const y={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return Re(this.context.count)},getNextContextId(){return Re(this.context.count++)}};function Re(e){const t=String(e),n=t.length-1;return y.context.id+(n?String.fromCharCode(96+n):"")+t}function _(e){y.context=e}const qe=!1,et=(e,t)=>e===t,tt=Symbol("solid-track"),ae={equals:et};let Q=null,nt=Ke;const V=1,ee=2,Ve={owned:null,cleanups:null,context:null,owner:null},me={};var h=null;let a=null,st=null,x=null,T=null,L=null,de=0;function Y(e,t){const n=x,s=h,r=e.length===0,i=t===void 0?s:t,l=r?Ve:{owned:null,cleanups:null,context:i?i.context:null,owner:i},o=r?e:()=>e(()=>j(()=>M(l)));h=l,x=null;try{return F(o,!0)}finally{x=n,h=s}}function k(e,t){t=t?Object.assign({},ae,t):ae;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},s=r=>(typeof r=="function"&&(a&&a.running&&a.sources.has(n)?r=r(n.tValue):r=r(n.value)),Ue(n,r));return[De.bind(n),s]}function Le(e,t,n){const s=ge(e,t,!0,V);se(s)}function te(e,t,n){const s=ge(e,t,!1,V);se(s)}function C(e,t,n){n=n?Object.assign({},ae,n):ae;const s=ge(e,t,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,se(s),De.bind(s)}function rt(e){return e&&typeof e=="object"&&"then"in e}function it(e,t,n){let s,r,i;s=!0,r=e,i={};let l=null,o=me,u=null,d=!1,c=!1,f="initialValue"in i,w=typeof s=="function"&&C(s);const p=new Set,[m,S]=(i.storage||k)(i.initialValue),[P,O]=k(void 0),[$,E]=k(void 0,{equals:!1}),[R,B]=k(f?"ready":"unresolved");y.context&&(u=y.getNextContextId(),i.ssrLoadFrom==="initial"?o=i.initialValue:y.load&&y.has(u)&&(o=y.load(u)));function q(v,A,N,g){return l===v&&(l=null,g!==void 0&&(f=!0),(v===o||A===o)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(g,{value:A})),o=me,a&&v&&d?(a.promises.delete(v),d=!1,F(()=>{a.running=!0,X(A,N)},!1)):X(A,N)),A}function X(v,A){F(()=>{A===void 0&&S(()=>v),B(A!==void 0?"errored":f?"ready":"unresolved"),O(A);for(const N of p.keys())N.decrement();p.clear()},!1)}function z(){const v=ne&&pe(ne),A=m(),N=P();if(N!==void 0&&!l)throw N;return x&&!x.user&&v&&Le(()=>{$(),l&&(v.resolved&&a&&d?a.promises.add(l):p.has(v)||(v.increment(),p.add(v)))}),A}function U(v=!0){if(v!==!1&&c)return;c=!1;const A=w?w():s;if(d=a&&a.running,A==null||A===!1){q(l,j(m));return}a&&l&&a.promises.delete(l);let N;const g=o!==me?o:j(()=>{try{return r(A,{value:m(),refetching:v})}catch(b){N=b}});if(N!==void 0){q(l,void 0,le(N),A);return}else if(!rt(g))return q(l,g,void 0,A),g;return l=g,"v"in g?(g.s===1?q(l,g.v,void 0,A):q(l,void 0,le(g.v),A),g):(c=!0,queueMicrotask(()=>c=!1),F(()=>{B(f?"refreshing":"pending"),E()},!1),g.then(b=>q(g,b,void 0,A),b=>q(g,void 0,le(b),A)))}Object.defineProperties(z,{state:{get:()=>R()},error:{get:()=>P()},loading:{get(){const v=R();return v==="pending"||v==="refreshing"}},latest:{get(){if(!f)return z();const v=P();if(v&&!l)throw v;return m()}}});let ie=h;return w?Le(()=>(ie=h,U(!1))):U(!1),[z,{refetch:v=>Ee(ie,()=>U(v)),mutate:S}]}function ot(e){return F(e,!1)}function j(e){if(x===null)return e();const t=x;x=null;try{return e()}finally{x=t}}function _e(e,t,n){const s=Array.isArray(e);let r,i=n&&n.defer;return l=>{let o;if(s){o=Array(e.length);for(let d=0;d<e.length;d++)o[d]=e[d]()}else o=e();if(i)return i=!1,l;const u=j(()=>t(o,r,l));return r=o,u}}function Ce(e){return h===null||(h.cleanups===null?h.cleanups=[e]:h.cleanups.push(e)),e}function lt(e,t){Q||(Q=Symbol("error")),h=ge(void 0,void 0,!0),h.context={...h.context,[Q]:[t]},a&&a.running&&a.sources.add(h);try{return e()}catch(n){re(n)}finally{h=h.owner}}function Me(){return h}function Ee(e,t){const n=h,s=x;h=e,x=null;try{return F(t,!0)}catch(r){re(r)}finally{h=n,x=s}}function ut(e){if(a&&a.running)return e(),a.done;const t=x,n=h;return Promise.resolve().then(()=>{x=t,h=n;let s;return ne&&(s=a||(a={sources:new Set,effects:[],promises:new Set,disposed:new Set,queue:new Set,running:!0}),s.done||(s.done=new Promise(r=>s.resolve=r)),s.running=!0),F(e,!1),x=h=null,s?s.done:void 0})}const[qt,Te]=k(!1);function at(e){L.push.apply(L,e),e.length=0}function he(e,t){const n=Symbol("context");return{id:n,Provider:ht(n),defaultValue:e}}function pe(e){let t;return h&&h.context&&(t=h.context[e.id])!==void 0?t:e.defaultValue}function ft(e){const t=C(e),n=C(()=>Se(t()));return n.toArray=()=>{const s=n();return Array.isArray(s)?s:s!=null?[s]:[]},n}let ne;function ct(){return ne||(ne=he())}function De(){const e=a&&a.running;if(this.sources&&(e?this.tState:this.state))if((e?this.tState:this.state)===V)se(this);else{const t=T;T=null,F(()=>fe(this),!1),T=t}if(x){const t=this.observers?this.observers.length:0;x.sources?(x.sources.push(this),x.sourceSlots.push(t)):(x.sources=[this],x.sourceSlots=[t]),this.observers?(this.observers.push(x),this.observerSlots.push(x.sources.length-1)):(this.observers=[x],this.observerSlots=[x.sources.length-1])}return e&&a.sources.has(this)?this.tValue:this.value}function Ue(e,t,n){let s=a&&a.running&&a.sources.has(e)?e.tValue:e.value;if(!e.comparator||!e.comparator(s,t)){if(a){const r=a.running;(r||!n&&a.sources.has(e))&&(a.sources.add(e),e.tValue=t),r||(e.value=t)}else e.value=t;e.observers&&e.observers.length&&F(()=>{for(let r=0;r<e.observers.length;r+=1){const i=e.observers[r],l=a&&a.running;l&&a.disposed.has(i)||((l?!i.tState:!i.state)&&(i.pure?T.push(i):L.push(i),i.observers&&We(i)),l?i.tState=V:i.state=V)}if(T.length>1e6)throw T=[],new Error},!1)}return t}function se(e){if(!e.fn)return;M(e);const t=de;ke(e,a&&a.running&&a.sources.has(e)?e.tValue:e.value,t),a&&!a.running&&a.sources.has(e)&&queueMicrotask(()=>{F(()=>{a&&(a.running=!0),x=h=e,ke(e,e.tValue,t),x=h=null},!1)})}function ke(e,t,n){let s;const r=h,i=x;x=h=e;try{s=e.fn(t)}catch(l){return e.pure&&(a&&a.running?(e.tState=V,e.tOwned&&e.tOwned.forEach(M),e.tOwned=void 0):(e.state=V,e.owned&&e.owned.forEach(M),e.owned=null)),e.updatedAt=n+1,re(l)}finally{x=i,h=r}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Ue(e,s,!0):a&&a.running&&e.pure?(a.sources.add(e),e.tValue=s):e.value=s,e.updatedAt=n)}function ge(e,t,n,s=V,r){const i={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:h,context:h?h.context:null,pure:n};return a&&a.running&&(i.state=0,i.tState=s),h===null||h!==Ve&&(a&&a.running&&h.pure?h.tOwned?h.tOwned.push(i):h.tOwned=[i]:h.owned?h.owned.push(i):h.owned=[i]),i}function He(e){const t=a&&a.running;if((t?e.tState:e.state)===0)return;if((t?e.tState:e.state)===ee)return fe(e);if(e.suspense&&j(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<de);){if(t&&a.disposed.has(e))return;(t?e.tState:e.state)&&n.push(e)}for(let s=n.length-1;s>=0;s--){if(e=n[s],t){let r=e,i=n[s+1];for(;(r=r.owner)&&r!==i;)if(a.disposed.has(r))return}if((t?e.tState:e.state)===V)se(e);else if((t?e.tState:e.state)===ee){const r=T;T=null,F(()=>fe(e,n[0]),!1),T=r}}}function F(e,t){if(T)return e();let n=!1;t||(T=[]),L?n=!0:L=[],de++;try{const s=e();return dt(n),s}catch(s){n||(L=null),T=null,re(s)}}function dt(e){if(T&&(Ke(T),T=null),e)return;let t;if(a){if(!a.promises.size&&!a.queue.size){const s=a.sources,r=a.disposed;L.push.apply(L,a.effects),t=a.resolve;for(const i of L)"tState"in i&&(i.state=i.tState),delete i.tState;a=null,F(()=>{for(const i of r)M(i);for(const i of s){if(i.value=i.tValue,i.owned)for(let l=0,o=i.owned.length;l<o;l++)M(i.owned[l]);i.tOwned&&(i.owned=i.tOwned),delete i.tValue,delete i.tOwned,i.tState=0}Te(!1)},!1)}else if(a.running){a.running=!1,a.effects.push.apply(a.effects,L),L=null,Te(!0);return}}const n=L;L=null,n.length&&F(()=>nt(n),!1),t&&t()}function Ke(e){for(let t=0;t<e.length;t++)He(e[t])}function fe(e,t){const n=a&&a.running;n?e.tState=0:e.state=0;for(let s=0;s<e.sources.length;s+=1){const r=e.sources[s];if(r.sources){const i=n?r.tState:r.state;i===V?r!==t&&(!r.updatedAt||r.updatedAt<de)&&He(r):i===ee&&fe(r,t)}}}function We(e){const t=a&&a.running;for(let n=0;n<e.observers.length;n+=1){const s=e.observers[n];(t?!s.tState:!s.state)&&(t?s.tState=ee:s.state=ee,s.pure?T.push(s):L.push(s),s.observers&&We(s))}}function M(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),s=e.sourceSlots.pop(),r=n.observers;if(r&&r.length){const i=r.pop(),l=n.observerSlots.pop();s<r.length&&(i.sourceSlots[l]=s,r[s]=i,n.observerSlots[s]=l)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)M(e.tOwned[t]);delete e.tOwned}if(a&&a.running&&e.pure)Ge(e,!0);else if(e.owned){for(t=e.owned.length-1;t>=0;t--)M(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}a&&a.running?e.tState=0:e.state=0}function Ge(e,t){if(t||(e.tState=0,a.disposed.add(e)),e.owned)for(let n=0;n<e.owned.length;n++)Ge(e.owned[n])}function le(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Ne(e,t,n){try{for(const s of t)s(e)}catch(s){re(s,n&&n.owner||null)}}function re(e,t=h){const n=Q&&t&&t.context&&t.context[Q],s=le(e);if(!n)throw s;L?L.push({fn(){Ne(s,n,t)},state:V}):Ne(s,n,t)}function Se(e){if(typeof e=="function"&&!e.length)return Se(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const s=Se(e[n]);Array.isArray(s)?t.push.apply(t,s):t.push(s)}return t}return e}function ht(e,t){return function(s){let r;return te(()=>r=j(()=>(h.context={...h.context,[e]:s.value},ft(()=>s.children))),void 0),r}}const pt=Symbol("fallback");function Ie(e){for(let t=0;t<e.length;t++)e[t]()}function gt(e,t,n={}){let s=[],r=[],i=[],l=0,o=t.length>1?[]:null;return Ce(()=>Ie(i)),()=>{let u=e()||[],d=u.length,c,f;return u[tt],j(()=>{let p,m,S,P,O,$,E,R,B;if(d===0)l!==0&&(Ie(i),i=[],s=[],r=[],l=0,o&&(o=[])),n.fallback&&(s=[pt],r[0]=Y(q=>(i[0]=q,n.fallback())),l=1);else if(l===0){for(r=new Array(d),f=0;f<d;f++)s[f]=u[f],r[f]=Y(w);l=d}else{for(S=new Array(d),P=new Array(d),o&&(O=new Array(d)),$=0,E=Math.min(l,d);$<E&&s[$]===u[$];$++);for(E=l-1,R=d-1;E>=$&&R>=$&&s[E]===u[R];E--,R--)S[R]=r[E],P[R]=i[E],o&&(O[R]=o[E]);for(p=new Map,m=new Array(R+1),f=R;f>=$;f--)B=u[f],c=p.get(B),m[f]=c===void 0?-1:c,p.set(B,f);for(c=$;c<=E;c++)B=s[c],f=p.get(B),f!==void 0&&f!==-1?(S[f]=r[c],P[f]=i[c],o&&(O[f]=o[c]),f=m[f],p.set(B,f)):i[c]();for(f=$;f<d;f++)f in S?(r[f]=S[f],i[f]=P[f],o&&(o[f]=O[f],o[f](f))):r[f]=Y(w);r=r.slice(0,l=d),s=u.slice(0)}return r});function w(p){if(i[f]=p,o){const[m,S]=k(f);return o[f]=S,t(u[f],m)}return t(u[f])}}}function Xe(e,t){return j(()=>e(t||{}))}function Vt(e){let t,n;const s=r=>{const i=y.context;if(i){const[o,u]=k();y.count||(y.count=0),y.count++,(n||(n=e())).then(d=>{!y.done&&_(i),y.count--,u(()=>d.default),_()}),t=o}else if(!t){const[o]=it(()=>(n||(n=e())).then(u=>u.default));t=o}let l;return C(()=>(l=t())?j(()=>{if(!i||y.done)return l(r);const o=y.context;_(i);const u=l(r);return _(o),u}):"")};return s.preload=()=>n||((n=e()).then(r=>t=()=>r.default),n),s}const yt=e=>`Stale read from <${e}>.`;function _t(e){const t="fallback"in e&&{fallback:()=>e.fallback};return C(gt(()=>e.each,e.children,t||void 0))}function Mt(e){const t=e.keyed,n=C(()=>e.when,void 0,void 0),s=t?n:C(n,void 0,{equals:(r,i)=>!r==!i});return C(()=>{const r=s();if(r){const i=e.children;return typeof i=="function"&&i.length>0?j(()=>i(t?r:()=>{if(!j(s))throw yt("Show");return n()})):i}return e.fallback},void 0,void 0)}let G;function wt(){G&&[...G].forEach(e=>e())}function Dt(e){let t;y.context&&y.load&&(t=y.load(y.getContextId()));const[n,s]=k(t,void 0);return G||(G=new Set),G.add(s),Ce(()=>G.delete(s)),C(()=>{let r;if(r=n()){const i=e.fallback;return typeof i=="function"&&i.length?j(()=>i(r,()=>s())):i}return lt(()=>e.children,s)},void 0,void 0)}const mt=he();function Ut(e){let t=0,n,s,r,i,l;const[o,u]=k(!1),d=ct(),c={increment:()=>{++t===1&&u(!0)},decrement:()=>{--t===0&&u(!1)},inFallback:o,effects:[],resolved:!1},f=Me();if(y.context&&y.load){const m=y.getContextId();let S=y.load(m);if(S&&(typeof S!="object"||S.s!==1?r=S:y.gather(m)),r&&r!=="$$f"){const[P,O]=k(void 0,{equals:!1});i=P,r.then(()=>{if(y.done)return O();y.gather(m),_(s),O(),_()},$=>{l=$,O()})}}const w=pe(mt);w&&(n=w.register(c.inFallback));let p;return Ce(()=>p&&p()),Xe(d.Provider,{value:c,get children(){return C(()=>{if(l)throw l;if(s=y.context,i)return i(),i=void 0;s&&r==="$$f"&&_();const m=C(()=>e.children);return C(S=>{const P=c.inFallback(),{showContent:O=!0,showFallback:$=!0}=n?n():{};if((!P||r&&r!=="$$f")&&O)return c.resolved=!0,p&&p(),p=s=r=void 0,at(c.effects),m();if($)return p?S:Y(E=>(p=E,s&&(_({id:s.id+"F",count:0}),s=void 0),e.fallback),f)})})}})}const Ht=e=>C(()=>e());function bt(e,t,n){let s=n.length,r=t.length,i=s,l=0,o=0,u=t[r-1].nextSibling,d=null;for(;l<r||o<i;){if(t[l]===n[o]){l++,o++;continue}for(;t[r-1]===n[i-1];)r--,i--;if(r===l){const c=i<s?o?n[o-1].nextSibling:n[i-o]:u;for(;o<i;)e.insertBefore(n[o++],c)}else if(i===o)for(;l<r;)(!d||!d.has(t[l]))&&t[l].remove(),l++;else if(t[l]===n[i-1]&&n[o]===t[r-1]){const c=t[--r].nextSibling;e.insertBefore(n[o++],t[l++].nextSibling),e.insertBefore(n[--i],c),t[r]=n[i]}else{if(!d){d=new Map;let f=o;for(;f<i;)d.set(n[f],f++)}const c=d.get(t[l]);if(c!=null)if(o<c&&c<i){let f=l,w=1,p;for(;++f<r&&f<i&&!((p=d.get(t[f]))==null||p!==c+w);)w++;if(w>c-o){const m=t[l];for(;o<c;)e.insertBefore(n[o++],m)}else e.replaceChild(n[o++],t[l++])}else l++;else t[l++].remove()}}}const Fe="_$DX_DELEGATE";function Kt(e,t,n,s={}){let r;return Y(i=>{r=i,t===document?e():xt(t,e(),t.firstChild?null:void 0,n)},s.owner),()=>{r(),t.textContent=""}}function Wt(e,t,n,s){let r;const i=()=>{const o=document.createElement("template");return o.innerHTML=e,o.content.firstChild},l=()=>(r||(r=i())).cloneNode(!0);return l.cloneNode=l,l}function Gt(e,t=window.document){const n=t[Fe]||(t[Fe]=new Set);for(let s=0,r=e.length;s<r;s++){const i=e[s];n.has(i)||(n.add(i),t.addEventListener(i,St))}}function Xt(e,t,n){Pe(e)||(n==null?e.removeAttribute(t):e.setAttribute(t,n))}function zt(e,t){Pe(e)||(t==null?e.removeAttribute("class"):e.className=t)}function Jt(e,t,n,s){Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n}function Qt(e,t,n={}){const s=Object.keys(t||{}),r=Object.keys(n);let i,l;for(i=0,l=r.length;i<l;i++){const o=r[i];!o||o==="undefined"||t[o]||(je(e,o,!1),delete n[o])}for(i=0,l=s.length;i<l;i++){const o=s[i],u=!!t[o];!o||o==="undefined"||n[o]===u||!u||(je(e,o,!0),n[o]=u)}return n}function xt(e,t,n,s){if(n!==void 0&&!s&&(s=[]),typeof t!="function")return ce(e,t,s,n);te(r=>ce(e,t(),r,n),s)}function Pe(e){return!!y.context&&!y.done&&(!e||e.isConnected)}function je(e,t,n){const s=t.trim().split(/\s+/);for(let r=0,i=s.length;r<i;r++)e.classList.toggle(s[r],n)}function St(e){if(y.registry&&y.events&&y.events.find(([u,d])=>d===e))return;let t=e.target;const n=`$$${e.type}`,s=e.target,r=e.currentTarget,i=u=>Object.defineProperty(e,"target",{configurable:!0,value:u}),l=()=>{const u=t[n];if(u&&!t.disabled){const d=t[`${n}Data`];if(d!==void 0?u.call(t,d,e):u.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&i(t.host),!0},o=()=>{for(;l()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),y.registry&&!y.done&&(y.done=_$HY.done=!0),e.composedPath){const u=e.composedPath();i(u[0]);for(let d=0;d<u.length-2&&(t=u[d],!!l());d++){if(t._$host){t=t._$host,o();break}if(t.parentNode===r)break}}else o();i(s)}function ce(e,t,n,s,r){const i=Pe(e);if(i){!n&&(n=[...e.childNodes]);let u=[];for(let d=0;d<n.length;d++){const c=n[d];c.nodeType===8&&c.data.slice(0,2)==="!$"?c.remove():u.push(c)}n=u}for(;typeof n=="function";)n=n();if(t===n)return n;const l=typeof t,o=s!==void 0;if(e=o&&n[0]&&n[0].parentNode||e,l==="string"||l==="number"){if(i||l==="number"&&(t=t.toString(),t===n))return n;if(o){let u=n[0];u&&u.nodeType===3?u.data!==t&&(u.data=t):u=document.createTextNode(t),n=W(e,n,s,u)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||l==="boolean"){if(i)return n;n=W(e,n,s)}else{if(l==="function")return te(()=>{let u=t();for(;typeof u=="function";)u=u();n=ce(e,u,n,s)}),()=>n;if(Array.isArray(t)){const u=[],d=n&&Array.isArray(n);if(ve(u,t,n,r))return te(()=>n=ce(e,u,n,s,!0)),()=>n;if(i){if(!u.length)return n;if(s===void 0)return n=[...e.childNodes];let c=u[0];if(c.parentNode!==e)return n;const f=[c];for(;(c=c.nextSibling)!==s;)f.push(c);return n=f}if(u.length===0){if(n=W(e,n,s),o)return n}else d?n.length===0?Be(e,u,s):bt(e,n,u):(n&&W(e),Be(e,u));n=u}else if(t.nodeType){if(i&&t.parentNode)return n=o?[t]:t;if(Array.isArray(n)){if(o)return n=W(e,n,s,t);W(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function ve(e,t,n,s){let r=!1;for(let i=0,l=t.length;i<l;i++){let o=t[i],u=n&&n[e.length],d;if(!(o==null||o===!0||o===!1))if((d=typeof o)=="object"&&o.nodeType)e.push(o);else if(Array.isArray(o))r=ve(e,o,u)||r;else if(d==="function")if(s){for(;typeof o=="function";)o=o();r=ve(e,Array.isArray(o)?o:[o],Array.isArray(u)?u:[u])||r}else e.push(o),r=!0;else{const c=String(o);u&&u.nodeType===3&&u.data===c?e.push(u):e.push(document.createTextNode(c))}}return r}function Be(e,t,n=null){for(let s=0,r=t.length;s<r;s++)e.insertBefore(t[s],n)}function W(e,t,n,s){if(n===void 0)return e.textContent="";const r=s||document.createTextNode("");if(t.length){let i=!1;for(let l=t.length-1;l>=0;l--){const o=t[l];if(r!==o){const u=o.parentNode===e;!i&&!l?u?e.replaceChild(r,o):e.insertBefore(r,n):u&&o.remove()}else i=!0}}else e.insertBefore(r,n);return[r]}const vt=!1;function At(){let e=new Set;function t(r){return e.add(r),()=>e.delete(r)}let n=!1;function s(r,i){if(n)return!(n=!1);const l={to:r,options:i,defaultPrevented:!1,preventDefault:()=>l.defaultPrevented=!0};for(const o of e)o.listener({...l,from:o.location,retry:u=>{u&&(n=!0),o.navigate(r,{...i,resolve:!1})}});return!l.defaultPrevented}return{subscribe:t,confirm:s}}let Ae;function ze(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Ae=window.history.state._depth}ze();function Yt(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function Zt(e,t){let n=!1;return()=>{const s=Ae;ze();const r=s==null?null:Ae-s;if(n){n=!1;return}r&&t(r)?(n=!0,window.history.go(-r)):e()}}const Ct=/^(?:[a-z0-9]+:)?\/\//i,Et=/^\/+|(\/)\/+$/g,Pt="http://sr";function Z(e,t=!1){const n=e.replace(Et,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function ue(e,t,n){if(Ct.test(t))return;const s=Z(e),r=n&&Z(n);let i="";return!r||t.startsWith("/")?i=s:r.toLowerCase().indexOf(s.toLowerCase())!==0?i=s+r:i=r,(i||"/")+Z(t,!i)}function $t(e,t){if(e==null)throw new Error(t);return e}function Ot(e,t){return Z(e).replace(/\/*(\*.*)?$/g,"")+Z(t)}function Je(e){const t={};return e.searchParams.forEach((n,s)=>{s in t?Array.isArray(t[s])?t[s].push(n):t[s]=[t[s],n]:t[s]=n}),t}function Rt(e,t,n){const[s,r]=e.split("/*",2),i=s.split("/").filter(Boolean),l=i.length;return o=>{const u=o.split("/").filter(Boolean),d=u.length-l;if(d<0||d>0&&r===void 0&&!t)return null;const c={path:l?"":"/",params:{}},f=w=>n===void 0?void 0:n[w];for(let w=0;w<l;w++){const p=i[w],m=p[0]===":",S=m?u[w]:u[w].toLowerCase(),P=m?p.slice(1):p.toLowerCase();if(m&&be(S,f(P)))c.params[P]=S;else if(m||!be(S,P))return null;c.path+=`/${S}`}if(r){const w=d?u.slice(-d).join("/"):"";if(be(w,f(r)))c.params[r]=w;else return null}return c}}function be(e,t){const n=s=>s===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function Lt(e){const[t,n]=e.pattern.split("/*",2),s=t.split("/").filter(Boolean);return s.reduce((r,i)=>r+(i.startsWith(":")?2:3),s.length-(n===void 0?0:1))}function Qe(e){const t=new Map,n=Me();return new Proxy({},{get(s,r){return t.has(r)||Ee(n,()=>t.set(r,C(()=>e()[r]))),t.get(r)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function Ye(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),s=e.slice(t.index+t[0].length);const r=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(s);)r.push(n+=t[1]),s=s.slice(t[0].length);return Ye(s).reduce((i,l)=>[...i,...r.map(o=>o+l)],[])}const Tt=100,kt=he(),Nt=he(),$e=()=>$t(pe(kt),"<A> and 'use' router primitives can be only used inside a Route."),en=()=>$e().navigatorFactory(),tn=()=>$e().location,nn=()=>$e().params;function It(e,t=""){const{component:n,preload:s,load:r,children:i,info:l}=e,o=!i||Array.isArray(i)&&!i.length,u={key:e,component:n,preload:s||r,info:l};return Ze(e.path).reduce((d,c)=>{for(const f of Ye(c)){const w=Ot(t,f);let p=o?w:w.split("/*",1)[0];p=p.split("/").map(m=>m.startsWith(":")||m.startsWith("*")?m:encodeURIComponent(m)).join("/"),d.push({...u,originalPath:c,pattern:p,matcher:Rt(p,!o,e.matchFilters)})}return d},[])}function Ft(e,t=0){return{routes:e,score:Lt(e[e.length-1])*1e4-t,matcher(n){const s=[];for(let r=e.length-1;r>=0;r--){const i=e[r],l=i.matcher(n);if(!l)return null;s.unshift({...l,route:i})}return s}}}function Ze(e){return Array.isArray(e)?e:[e]}function jt(e,t="",n=[],s=[]){const r=Ze(e);for(let i=0,l=r.length;i<l;i++){const o=r[i];if(o&&typeof o=="object"){o.hasOwnProperty("path")||(o.path="");const u=It(o,t);for(const d of u){n.push(d);const c=Array.isArray(o.children)&&o.children.length===0;if(o.children&&!c)jt(o.children,d.pattern,n,s);else{const f=Ft([...n],s.length);s.push(f)}n.pop()}}}return n.length?s:s.sort((i,l)=>l.score-i.score)}function xe(e,t){for(let n=0,s=e.length;n<s;n++){const r=e[n].matcher(t);if(r)return r}return[]}function Bt(e,t,n){const s=new URL(Pt),r=C(c=>{const f=e();try{return new URL(f,s)}catch{return console.error(`Invalid path ${f}`),c}},s,{equals:(c,f)=>c.href===f.href}),i=C(()=>r().pathname),l=C(()=>r().search,!0),o=C(()=>r().hash),u=()=>"",d=_e(l,()=>Je(r()));return{get pathname(){return i()},get search(){return l()},get hash(){return o()},get state(){return t()},get key(){return u()},query:n?n(d):Qe(d)}}let D;function sn(){return D}function rn(e){}function on(e,t,n,s={}){const{signal:[r,i],utils:l={}}=e,o=l.parsePath||(g=>g),u=l.renderPath||(g=>g),d=l.beforeLeave||At(),c=ue("",s.base||"");if(c===void 0)throw new Error(`${c} is not a valid base path`);c&&!r().value&&i({value:c,replace:!0,scroll:!1});const[f,w]=k(!1);let p;const m=(g,b)=>{b.value===S()&&b.state===O()||(p===void 0&&w(!0),D=g,p=b,ut(()=>{p===b&&(P(p.value),$(p.state),wt(),B[1](I=>I.filter(H=>H.pending)))}).finally(()=>{p===b&&ot(()=>{D=void 0,g==="navigate"&&A(p),w(!1),p=void 0})}))},[S,P]=k(r().value),[O,$]=k(r().state),E=Bt(S,O,l.queryWrapper),R=[],B=k([]),q=C(()=>typeof s.transformUrl=="function"?xe(t(),s.transformUrl(E.pathname)):xe(t(),E.pathname)),X=()=>{const g=q(),b={};for(let I=0;I<g.length;I++)Object.assign(b,g[I].params);return b},z=l.paramsWrapper?l.paramsWrapper(X,t):Qe(X),U={pattern:c,path:()=>c,outlet:()=>null,resolvePath(g){return ue(c,g)}};return te(_e(r,g=>m("native",g),{defer:!0})),{base:U,location:E,params:z,isRouting:f,renderPath:u,parsePath:o,navigatorFactory:v,matches:q,beforeLeave:d,preloadRoute:N,singleFlight:s.singleFlight===void 0?!0:s.singleFlight,submissions:B};function ie(g,b,I){j(()=>{if(typeof b=="number"){b&&(l.go?l.go(b):console.warn("Router integration does not support relative routing"));return}const H=!b||b[0]==="?",{replace:ye,resolve:K,scroll:we,state:J}={replace:!1,resolve:!H,scroll:!0,...I},oe=K?g.resolvePath(b):ue(H&&E.pathname||"",b);if(oe===void 0)throw new Error(`Path '${b}' is not a routable path`);if(R.length>=Tt)throw new Error("Too many redirects");const Oe=S();(oe!==Oe||J!==O())&&(vt||d.confirm(oe,I)&&(R.push({value:Oe,replace:ye,scroll:we,state:O()}),m("navigate",{value:oe,state:J})))})}function v(g){return g=g||pe(Nt)||U,(b,I)=>ie(g,b,I)}function A(g){const b=R[0];b&&(i({...g,replace:b.replace,scroll:b.scroll}),R.length=0)}function N(g,b){const I=xe(t(),g.pathname),H=D;D="preload";for(let ye in I){const{route:K,params:we}=I[ye];K.component&&K.component.preload&&K.component.preload();const{preload:J}=K;b&&J&&Ee(n(),()=>J({params:we,location:{pathname:g.pathname,search:g.search,hash:g.hash,query:Je(g),state:null,key:""},intent:"preload"}))}D=H}}function ln(e,t,n,s){const{base:r,location:i,params:l}=e,{pattern:o,component:u,preload:d}=s().route,c=C(()=>s().path);u&&u.preload&&u.preload();const f=d?d({params:l,location:i,intent:D||"initial"}):void 0;return{parent:t,pattern:o,path:c,outlet:()=>u?Xe(u,{params:l,location:i,data:f,get children(){return n()}}):n(),resolvePath(p){return ue(r.path(),p,c())}}}export{xt as A,Kt as B,nn as C,en as D,Dt as E,tn as F,zt as G,_t as H,te as I,Xt as J,Qt as K,Jt as L,kt as R,Mt as S,C as a,jt as b,ft as c,on as d,Xe as e,Nt as f,sn as g,Me as h,Y as i,ln as j,k,Ce as l,Ht as m,y as n,_e as o,Gt as p,Pt as q,At as r,rn as s,Yt as t,j as u,ze as v,Zt as w,Vt as x,Ut as y,Wt as z};
